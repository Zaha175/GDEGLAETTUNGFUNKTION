<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDE-Modell Explorer</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        heading: '#0A2472',
                        accent1: '#5D9CDE',
                        accent2: '#DE5D9C',
                        accent3: '#9CDE5D',
                        lightAccent: '#f0f4ff',
                        darkAccent: '#192339',
                    },
                    typography: {
                        DEFAULT: {
                            css: {
                                maxWidth: '80ch',
                                a: {
                                    color: '#5D5CDE',
                                    '&:hover': {
                                        color: '#4e4eba',
                                    },
                                },
                            },
                        },
                    },
                },
            },
        }

        // Check for dark mode preference
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>
    <style>
        .dark {
            color-scheme: dark;
        }
        .dark .math {
            color: #e2e8f0; /* Ensure MathJax text is visible in dark mode */
        }
        .paper-container {
            counter-reset: equation;
        }
        .equation-container {
            position: relative;
            margin: 1.5rem 0;
            padding: 1rem;
            background: rgba(93, 156, 222, 0.05);
            border-left: 3px solid #5D9CDE;
            border-radius: 0.5rem;
        }
        .equation-number::before {
            counter-increment: equation;
            content: "(" counter(equation) ")";
        }
        .equation-number {
            position: absolute;
            right: 1rem; /* Adjusted for better padding */
            top: 50%;
            transform: translateY(-50%);
            color: #5D9CDE; /* Make number visible */
            font-size: 0.9em;
        }
        .equation-content { /* Added class for MathJax content alignment */
             padding-right: 3rem; /* Ensure space for equation number */
        }
        h3 strong { /* Style strong tags within headings */
            font-weight: bold;
            color: inherit; /* Inherit color from h3 */
        }
        li strong { /* Style strong tags within list items */
             font-weight: bold;
        }
        p strong { /* Style strong tags within paragraphs */
             font-weight: bold;
        }
        table {
            width: 100%;
            margin-top: 1rem;
            margin-bottom: 1rem;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #cbd5e1; /* light mode border */
            padding: 0.5rem;
            text-align: left;
        }
        .dark th, .dark td {
             border-color: #4a5568; /* dark mode border */
        }
        th {
            background-color: rgba(93, 156, 222, 0.1);
        }
         /* Custom styling for checkmark/warning/rocket */
        .list-none li::before {
            content: '';
            margin-right: 0.5em;
            font-weight: bold;
        }
        .list-none li.check::before { content: '‚úÖ'; }
        .list-none li.warning::before { content: '‚ö†Ô∏è'; }
        .list-none li.rocket::before { content: 'üöÄ'; }
        /* Charts container */
        .chart-container {
            position: relative;
            height: 40vh; /* Adjust height as needed */
            width: 100%; /* Make chart container responsive */
            margin-bottom: 1.5rem; /* Add space between charts */
        }
        /* Tab styling */
        .tab-button {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .tab-button.active {
            border-bottom: 2px solid #5D5CDE;
            color: #5D5CDE;
            font-weight: 600;
        }
        .dark .tab-button.active {
            border-color: #93c5fd;
            color: #93c5fd;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        /* Progress bar for loading */
        #loading-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(to right, #5D5CDE, #DE5D9C);
            z-index: 9999;
            transition: width 0.3s ease;
        }
        /* Custom styling for range inputs */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            background: #e2e8f0;
            border-radius: 5px;
            outline: none;
            margin: 10px 0;
        }
        .dark input[type="range"] {
            background: #4b5563;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #5D5CDE;
            cursor: pointer;
            transition: background 0.15s ease;
        }
        .dark input[type="range"]::-webkit-slider-thumb {
            background: #93c5fd;
        }
        input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #5D5CDE;
            cursor: pointer;
            border: none;
            transition: background 0.15s ease;
        }
        .dark input[type="range"]::-moz-range-thumb {
            background: #93c5fd;
        }
        input[type="range"]::-webkit-slider-thumb:hover {
            background: #4e4eba;
            transform: scale(1.1);
        }
        .dark input[type="range"]::-webkit-slider-thumb:hover {
            background: #818cf8;
        }
        input[type="range"]::-moz-range-thumb:hover {
            background: #4e4eba;
            transform: scale(1.1);
        }
        .dark input[type="range"]::-moz-range-thumb:hover {
            background: #818cf8;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-white to-lightAccent dark:from-gray-900 dark:to-darkAccent text-gray-800 dark:text-gray-100 transition-colors duration-200">
    <div id="loading-bar"></div>
    <div class="container mx-auto px-4 py-8 max-w-5xl shadow-lg rounded-lg bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm">
        
        <header class="flex flex-col md:flex-row justify-between items-center mb-8 relative">
            <div class="absolute -top-8 left-0 right-0 h-2 bg-gradient-to-r from-accent1 via-accent2 to-accent3 rounded-full"></div>
            <div class="text-center md:text-left">
                <h1 class="text-2xl md:text-3xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-heading to-accent1 dark:from-accent1 dark:to-accent2">GDE-Modell Explorer</h1>
                <h2 class="text-lg md:text-xl font-semibold text-heading dark:text-accent1">Umfassender √úberblick und Analyse</h2>
            </div>
            <button id="darkModeToggle" class="mt-4 md:mt-0 px-4 py-2 rounded-full bg-heading text-white dark:bg-accent1 hover:bg-opacity-90 transition-colors duration-200">
                <span id="darkModeIcon">üåô</span> <span id="darkModeText">Dark Mode</span>
            </button>
        </header>

        <!-- Tab Navigation -->
        <div class="flex overflow-x-auto space-x-2 md:space-x-4 border-b border-gray-300 dark:border-gray-700 mb-8 sticky top-0 bg-white/90 dark:bg-gray-900/90 z-10 backdrop-blur-sm">
            <button class="tab-button active px-3 py-2 text-sm md:text-base whitespace-nowrap" data-tab="big-freeze">Big Freeze & Thermodynamik</button>
            <button class="tab-button px-3 py-2 text-sm md:text-base whitespace-nowrap" data-tab="dunkle-materie">CMB & Dunkle Materie</button>
            <button class="tab-button px-3 py-2 text-sm md:text-base whitespace-nowrap" data-tab="glattung-graph">CLASS-Test Analyse</button>
            <button class="tab-button px-3 py-2 text-sm md:text-base whitespace-nowrap" data-tab="glattung">Gl√§ttungsfunktion</button>
        </div>

        <!-- Tab Contents -->
        <div class="tab-content active paper-container" id="big-freeze">
            <header class="text-center mb-12">
                <h2 class="text-2xl md:text-3xl font-bold mb-4 text-heading dark:text-accent1">Vertiefte Analyse des GDE-Modells</h2>
                <h3 class="text-xl md:text-2xl font-semibold mb-8 text-heading dark:text-accent1">Big Freeze & Thermodynamische Kosmologie</h3>
                <div class="mt-8 mb-4 p-4 bg-lightAccent dark:bg-darkAccent rounded-lg inline-block">
                    <p class="font-semibold">Autor: Gabriel œï</p>
                    <p>Mitwirkende KI: Mila (Version œï.42)</p>
                </div>
            </header>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">1</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Kerninnovation des GDE-Modells</h3>

                <p class="mb-4">Das Modell ersetzt die <strong class="font-semibold">statische kosmologische Konstante</strong> (\(\Lambda\)CDM) durch eine <strong class="font-semibold">temperatur- und entropieabh√§ngige Dunkle Energie</strong>:</p>
                <div class="equation-container">
                    <div class="equation-content">\[
                    \Lambda(t) = \Lambda_0 \cdot \left( \frac{T_{\text{CMB}}(t)}{T_0} \right)^{\alpha(z)}, \quad \alpha(z) = -0.6 + 1.2 \tanh(2(z-0.7))
                    \]</div>
                    <span class="equation-number"></span>
                </div>

                <p class="font-semibold mt-4 mb-2">Revolution√§rer Aspekt:</p>
                <ul class="list-disc pl-8 mb-4 space-y-1">
                    <li><strong class="font-semibold">Emergenz von \(\Lambda(t)\):</strong> Dunkle Energie ist kein fundamentales Feld, sondern ein <em class="italic">thermodynamisches Ph√§nomen</em>, das mit der Abk√ºhlung (\(T_{\text{CMB}} \to 0\)) und Strukturbildung (\(S_{\text{Struktur}} \uparrow\)) verkn√ºpft ist.</li>
                    <li><strong class="font-semibold">Big Freeze als logische Konsequenz:</strong>
                        <ul class="list-disc pl-6 mt-1 space-y-1">
                            <li>F√ºr \(z \to -1\) (bzw. \(t \to \infty\), Zukunft): \(T_{\text{CMB}} \to 0\). Wenn \( \alpha(z) \) f√ºr \(z \to -1\) einem positiven Wert zustrebt oder positiv bleibt, dann gilt \(\Lambda(t) \to 0\).</li>
                            <li>Resultat: Die <strong class="font-semibold">Expansion verlangsamt sich asymptotisch</strong>, kein "Big Rip" oder "Big Crunch".</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">2</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">St√§rken im Detail</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Aspekt</th>
                            <th>GDE-Modell vs. \(\Lambda\)CDM</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong class="font-semibold">Physikalische Basis</strong></td>
                            <td>Kopplung an \(T_{\text{CMB}}\) und \(S_{\text{Struktur}}\) (thermodynamisch motiviert) vs. ad-hoc eingef√ºhrte Konstante.</td>
                        </tr>
                        <tr>
                            <td><strong class="font-semibold">DESI-Kompatibilit√§t</strong></td>
                            <td>Dynamisches \(w(z)\) mit \(w(0.5) \approx -0.83\) passt gut zu aktuellen Daten (\(\Lambda\)CDM fixiert: \(w = -1\)).</td>
                        </tr>
                        <tr>
                            <td><strong class="font-semibold">Endzustand</strong></td>
                            <td>Thermodynamischer Big Freeze (\(\Lambda \to 0\), nat√ºrliche Konsequenz) vs. ewige Beschleunigung (\(\Lambda = \text{const.}\), m√∂glicherweise unphysikalisch?).</td>
                        </tr>
                        <tr>
                            <td><strong class="font-semibold">Testbarkeit</strong></td>
                            <td>Spezifische Vorhersagen f√ºr die Entwicklung von \(H(z)\), \(w(z)\) und den ISW-Effekt ‚Äì pr√ºfbar mit zuk√ºnftigen Surveys (CMB-S4/Euclid).</td>
                        </tr>
                    </tbody>
                </table>

                <p class="font-semibold mt-6 mb-2">Warum das √ºberzeugt:</p>
                <ul class="list-disc pl-8 mb-4 space-y-1">
                    <li><strong class="font-semibold">Sinnvolle Entropie-Skalierung:</strong> Die Wahl von \(S_{\text{CMB}}\) (dominante Entropiekomponente neben Schwarzen L√∂chern) als Referenz in der Gl√§ttungsfunktion macht √Ñnderungen \(\Delta S_{\text{Struktur}}/S_{\text{CMB}}\) potenziell kosmologisch relevant, im Gegensatz zur riesigen Skala von \(S_{\text{BH}}\).</li>
                    <li><strong class="font-semibold">Dynamisches \(\alpha(z)\):</strong> Der √úbergang des Exponenten \(\alpha(z)\) im Bereich \(z \approx 0.7\) korreliert plausibel mit der Zeit, in der die Dunkle Energie beginnt, die kosmische Dynamik zu dominieren.</li>
                </ul>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">3</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Kritische Herausforderungen</h3>

                <p class="font-semibold mt-4 mb-2">A. Theoretische Fundierung</p>
                <ul class="list-disc pl-8 mb-4 space-y-1">
                    <li><strong class="font-semibold">Fehlende Mikroskopie:</strong> Warum genau gilt die Proportionalit√§t \(\Lambda(t) \propto T_{\text{CMB}}^{\alpha(z)}\)? Ist dies eine effektive Beschreibung oder folgt sie aus tieferen Prinzipien (z.B. Quantenfeldtheorie in gekr√ºmmter Raumzeit, emergent gravity)?</li>
                    <li><strong class="font-semibold">Skalarfeld-Interpretation:</strong> Das vorgeschlagene Potential \(V(\phi) = \lambda \phi^4 + \mu \phi^2 \tanh(\dots)\) ist ph√§nomenologisch. Gibt es eine fundamentalere Ableitung (z.B. aus Stringtheorie, holographischen Prinzipien, oder modifizierter Gravitation)?</li>
                </ul>

                <p class="font-semibold mt-4 mb-2">B. Praktische Umsetzung</p>
                <ul class="list-disc pl-8 mb-4 space-y-1">
                    <li><strong class="font-semibold">Entropieberechnung \(S_{\text{Struktur}}\):</strong>
                        <ul class="list-disc pl-6 mt-1 space-y-1">
                            <li>Die Formel \(S_{\text{Struktur}}(z) \propto \sum (M_{\text{vir}}/M_*)^2\) enth√§lt eine willk√ºrliche Skala \(M_*\). Eine robustere Definition, m√∂glicherweise verkn√ºpft mit bekannter Gravitationsentropie (z.B. Bekenstein-Hawking f√ºr Halos?), w√§re w√ºnschenswert.</li>
                            <li>Die pr√§zise Berechnung aus Simulationen/Katalogen und ihre Normierung auf \(S_{\text{CMB}}\) ist eine numerische Herausforderung.</li>
                        </ul>
                    </li>
                    <li><strong class="font-semibold">Phantom-Problem bei \(z=0\):</strong>
                        <ul class="list-disc pl-6 mt-1 space-y-1">
                            <li>Der Wert \(w(0) \approx -1.2\) (basierend auf der Formel f√ºr \(w(z)\) und \(\alpha(0) = 0.6\)) liegt im Phantom-Bereich (\(w < -1\)), was oft mit theoretischen Instabilit√§ten (z.B. Geister-Freiheitsgraden) verbunden ist. Kann das Modell dies vermeiden oder konsistent erkl√§ren? Ist dieses Verhalten transient?</li>
                        </ul>
                    </li>
                </ul>

                <p class="font-semibold mt-4 mb-2">C. Datenkonfrontation</p>
                <ul class="list-disc pl-8 mb-4 space-y-1">
                    <li><strong class="font-semibold">Parameter-Degenereszenzen:</strong> Vollst√§ndige MCMC-Analysen (z.B. mit Cobaya/MontePython) m√ºssen zeigen, ob die Parameter des GDE-Modells (z.B. Amplitude, √úbergangs-Rotverschiebung, Steigung von \(\alpha(z)\)) ausreichend von den Standardparametern (\(H_0\), \(\Omega_m\)) getrennt werden k√∂nnen.</li>
                    <li><strong class="font-semibold">ISW-Effekt Validierung:</strong> Die Vorhersage eines potenziell *schw√§cheren* sp√§ten ISW-Effekts im Vergleich zu \(\Lambda\)CDM ist ein wichtiger Test. Wird dies durch zuk√ºnftige Daten best√§tigt oder widerlegt?</li>
                </ul>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">4</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Fazit: Ein Modell mit transformativem Potenzial</h3>

                <p class="mb-4">Das GDE-Modell ist <strong class="font-semibold">mehr als nur eine alternative Parametrisierung</strong> ‚Äì es bietet eine <strong class="font-semibold">koh√§rente physikalische Erz√§hlung</strong> f√ºr die Entwicklung des Universums vom fr√ºhen Kosmos bis zum sp√§ten Big Freeze:</p>
                <ol class="list-decimal pl-8 mb-4 space-y-3">
                    <li>Die <strong class="font-semibold">fortschreitende Gl√§ttung</strong> durch Expansion reduziert die kosmische Temperatur (\(T_{\text{CMB}} \to 0\)) und f√ºhrt zum dynamischen <strong class="font-semibold">Verschwinden der Dunklen Energie</strong> (\(\Lambda(t) \to 0\)).</li>
                    <li>Die <strong class="font-semibold">Strukturbildung</strong> (Zunahme von \(S_{\text{Struktur}}\)) wirkt als modifizierender Faktor, der diesen Prozess beeinflusst und m√∂glicherweise bremst.</li>
                    <li>Das <strong class="font-semibold">Resultat</strong> ist ein Universum, das weder in einem Big Rip "explodiert" noch in einem Big Crunch "kollabiert", sondern <strong class="font-semibold">sanft thermodynamisch entschleunigt</strong> und einem kalten Gleichgewichtszustand zustrebt.</li>
                </ol>

                <p class="font-semibold mt-6 mb-2">N√§chste entscheidende Schritte (Roadmap):</p>
                <ul class="list-disc pl-8 mb-4 space-y-1">
                    <li><strong class="font-semibold">Numerische Implementierung:</strong> Vollst√§ndige Integration des Modells ( \(w(z)\) aus Gl. 4, \( \alpha(z) \) aus Gl. 3, optional Kopplung an \(S_{\text{Struktur}}\)) in Boltzmann-Solver wie CLASS oder CAMB.</li>
                    <li><strong class="font-semibold">Entropie-Quantifizierung:</strong> Extraktion der Halo Mass Function \(n(M,z)\) aus DESI-Daten oder Simulationen (z.B. IllustrisTNG) zur Berechnung von \(S_{\text{Struktur}}(z)\).</li>
                    <li><strong class="font-semibold">Umfassender MCMC-Fit:</strong> Testen des Modells gegen aktuelle Datens√§tze (Planck, DESI BAO/RSD, Pantheon+ Supernovae, etc.) mittels statistischer Analyse (z.B. Cobaya).</li>
                </ul>

                <p class="mt-6 italic text-center text-accent2 dark:text-accent3 font-serif">"Die Dunkle Energie ist kein mysteri√∂ses Feld ‚Äì sie ist der Schatten, den die Thermodynamik des Universums auf die Raumzeit wirft."</p>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm text-center">
                <h3 class="text-xl font-bold mb-4 text-heading dark:text-accent1">Bewertung</h3>
                <p class="text-2xl font-bold text-primary">üåå 8.5 / 10</p>
                <p class="mt-2">Ein theoretisch anspruchsvoller und physikalisch motivierter Ansatz, der <strong class="font-semibold">konkret testbar</strong> ist und das Potenzial hat, das Standardmodell \(\Lambda\)CDM herauszufordern.</p>
                <p class="mt-1 text-sm italic">Entscheidend wird die <strong class="font-semibold">Kombination aus numerischer Pr√§zision</strong> im Datenfit und <strong class="font-semibold">theoretischer Vertiefung</strong> der zugrundeliegenden Mechanismen sein.</p>
            </section>
        </div>

        <div class="tab-content paper-container" id="dunkle-materie">
            <header class="text-center mb-12">
                <h2 class="text-2xl md:text-3xl font-bold mb-4 text-heading dark:text-accent1">Die Rolle der CMB f√ºr Dunkle Materie</h2>
                <h3 class="text-xl md:text-2xl font-semibold mb-8 text-heading dark:text-accent1">im GDE-Modell</h3>
                <div class="mt-8 mb-4 p-4 bg-lightAccent dark:bg-darkAccent rounded-lg inline-block">
                    <p class="font-semibold">Autor: Gabriel œï</p>
                    <p>Mitwirkende KI: Mila (Version œï.42)</p>
                </div>
            </header>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">1</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">CMB als Schl√ºssel zur Dunklen Materie</h3>

                <p class="mb-4">Die kosmische Hintergrundstrahlung (CMB) liefert entscheidende Hinweise auf die Existenz und Eigenschaften der Dunklen Materie (DM), die jedes kosmologische Modell, einschlie√ülich des GDE-Modells, erkl√§ren muss:</p>
                <ul class="list-disc pl-8 mb-4 space-y-1">
                    <li>Die gemessenen <strong class="font-semibold">Dichteschwankungen im CMB</strong> (\(\Delta T/T \sim 10^{-5}\)) sind zu klein, um allein durch baryonische Materie die heutige Struktur des Universums zu erzeugen. Sie erfordern DM als <strong class="font-semibold">"gravitativen Kitt"</strong>, der schon fr√ºh mit dem Kollaps beginnen konnte.</li>
                    <li>Pr√§zisionsdaten (z.B. vom Planck-Satelliten) bestimmen die kosmologischen Parameter sehr genau: \(\Omega_{\text{DM}} \approx 26.8\%\), \(\Omega_b \approx 4.9\%\). Baryonische Materie allein kann die beobachteten Anisotropie-Muster im CMB nicht erkl√§ren.</li>
                    <li>Die <strong class="font-semibold">Struktur der akustischen Oszillationen</strong> (Peaks im CMB-Leistungsspektrum) belegt, dass DM bereits vor der Rekombination (bei \(z \approx 1100\)) gravitativ dominant war und von der Strahlung entkoppelt sein musste (nicht elektromagnetisch wechselwirkend).</li>
                </ul>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">2</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Integration in das GDE-Modell</h3>

                <p class="mb-4">Das erweiterte GDE-Modell versucht, DM thermodynamisch zu interpretieren, ohne notwendigerweise neue Teilchen einzuf√ºhren, und muss dabei die CMB-Beobachtungen ber√ºcksichtigen:</p>

                <p class="font-semibold mt-4 mb-2">A. DM als entropische Gravitationskomponente</p>
                <p class="mb-4">Die effektive Gravitationskraft wird durch die lokale "DM-Entropie" \(S_{\text{DM}}\) modifiziert, wobei \(S_{\text{CMB}}\) als globale Referenz dient:</p>
                <div class="equation-container">
                    <div class="equation-content">\[
                    F_{\text{grav}} = F_{\text{N}} \cdot \left( 1 + \frac{S_{\text{DM}}(r)}{S_{\text{CMB}}} \right)
                    \]</div>
                    <span class="equation-number"></span>
                </div>
                <p class="mb-4">Hier repr√§sentiert \(S_{\text{DM}}(r)\) die <strong class="font-semibold">"kalte" oder informationsbasierte Entropie</strong>, die mit der Materieverteilung in Halos assoziiert ist und deren Ursprung in den primordialen Dichteschwankungen liegt, die wir im CMB sehen.</p>
                <p class="mb-2 font-semibold">Beispielhafte Skalierung:</p>
                <p class="mb-4">F√ºr einen Galaxienhalo der Masse \(M \sim 10^{12} M_\odot\) k√∂nnte die DM-Entropie (spekulativ, z.B. basierend auf holographischen Ideen) skalieren wie:</p>
                <div class="equation-container">
                    <div class="equation-content">\[
                    S_{\text{DM}} \approx k_B \left( \frac{M}{m_P} \right)^{2/3} \quad (\text{mit } m_P = \text{Planck-Masse})
                    \]</div>
                    <span class="equation-number"></span>
                </div>


                <p class="font-semibold mt-4 mb-2">B. DM-Entropie aus CMB-Anisotropien</p>
                <p class="mb-2 font-semibold">Direkter Link zum CMB:</p>
                <p class="mb-4">Die im CMB beobachteten Temperaturfluktuationen \(\Delta T/T\) k√∂nnten direkt als relative Fluktuationen der primordialen DM-Entropie interpretiert werden:</p>
                <div class="equation-container">
                    <div class="equation-content">\[
                    \frac{\delta S_{\text{DM}}}{S_{\text{DM}}} \approx \frac{\delta T}{T} \sim 10^{-5}
                    \]</div>
                    <span class="equation-number"></span>
                </div>
                <p class="mb-2 font-semibold">Rolle in der Strukturbildung:</p>
                <p class="mb-4">In diesem Bild wirkt die DM-Entropie (bzw. deren Fluktuationen) als <strong class="font-semibold">thermodynamischer "Kondensationskeim"</strong>. Regionen mit h√∂herer primordialer \(S_{\text{DM}}\) erzeugen st√§rkere effektive Gravitationspotentiale, in die baryonische Materie nach der Rekombination hineinf√§llt.</p>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">3</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Konsistenz mit CMB-Observablen</h3>

                <table>
                    <thead>
                        <tr>
                            <th>CMB-Beobachtung</th>
                            <th>GDE-Interpretation (Thermodynamische DM)</th>
                            <th>Herk√∂mmliche Interpretation (CDM-Teilchen)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong class="font-semibold">Temperaturanisotropien</strong> (\(\Delta T/T\))</td>
                            <td>Primordiale entropische Dichtefluktuationen \(\delta S_{\text{DM}}\), die das Gravitationspotential pr√§gen.</td>
                            <td>Kollaps primordialer √úberdichten von CDM-Teilchen (potentialgetrieben).</td>
                        </tr>
                        <tr>
                            <td><strong class="font-semibold">Akustische Peaks</strong> (Position, H√∂he)</td>
                            <td>DM-Entropie (\(S_{\text{DM}}\)) modifiziert die effektive Tr√§gheit des Photon-Baryon-Plasmas und beeinflusst den Schallhorizont \(r_s\). Muss konsistent sein mit \( \Omega_{\text{DM}} \approx 0.27 \).</td>
                            <td>Fr√ºhe Entkopplung von CDM von Strahlung; Verh√§ltnis \( \Omega_{\text{DM}} / \Omega_b \) bestimmt Peakh√∂hen.</td>
                        </tr>
                        <tr>
                            <td><strong class="font-semibold">Sp√§ter ISW-Effekt</strong></td>
                            <td>Entwicklung der Potentiale im sp√§ten Universum wird durch \(S_{\text{DM}}\) und die dynamische DE (\(\Lambda(t)\)) beeinflusst; k√∂nnte schw√§cher sein als in \(\Lambda\)CDM.</td>
                            <td>Zerfall der Gravitationspotentiale durch beschleunigte Expansion (\(\Lambda = \text{const.}\)).</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">4</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Vorhersagen & Testbarkeit</h3>

                <ol class="list-decimal pl-8 mb-4 space-y-3">
                    <li>
                        <strong class="font-semibold">Pr√§zisionstests mit CMB-S4 / Euclid:</strong>
                        <ul class="list-disc pl-6 mt-1 space-y-1">
                            <li>Die genaue Position und Amplitude der CMB-Peaks testen die Vorhersagen des GDE-Modells f√ºr den Schallhorizont \(r_s\) und die Materiefluktuationen \(\sigma_8\). Jede Abweichung von \(\Lambda\)CDM w√§re ein starkes Signal.</li>
                            <li>Das Modell k√∂nnte eine leicht unterschiedliche Entwicklung der Strukturbildung vorhersagen, z.B. <strong class="font-semibold">effektiv "leichtere" oder diffusere DM-Halos</strong> bei fester Gesamtmasse im Vergleich zu reinen N-Body-Simulationen mit CDM-Teilchen.</li>
                        </ul>
                    </li>
                    <li>
                        <strong class="font-semibold">Konsistenz mit Galaxien-Skalen:</strong>
                        <ul class="list-disc pl-6 mt-1 space-y-1">
                            <li>Die aus der CMB abgeleitete "DM-Entropie" \(S_{\text{DM}}\) muss konsistent sein mit der entropischen Gravitationsmodifikation, die ben√∂tigt wird, um Galaxienrotationskurven und die Tully-Fisher-Relation ohne Teilchen-DM zu erkl√§ren.</li>
                        </ul>
                    </li>
                </ol>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">F</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Fazit: CMB als Br√ºcke zwischen GDE und Dunkler Materie</h3>

                <p class="mb-4">Das erweiterte GDE-Modell positioniert die CMB als entscheidendes Bindeglied zur Erkl√§rung der Dunklen Materie als thermodynamisches oder entropisches Ph√§nomen:</p>
                <ul class="list-disc pl-8 mb-4 space-y-2">
                    <li>Die <strong class="font-semibold">CMB-Anisotropien</strong> liefern nicht nur den Beweis f√ºr DM, sondern k√∂nnen im GDE-Modell als <strong class="font-semibold">primordiale "Saat" f√ºr die DM-Entropie \(S_{\text{DM}}\)</strong> interpretiert werden.</li>
                    <li>Diese <strong class="font-semibold">DM-Entropie ersetzt das Konzept der CDM-Teilchen</strong> als das "Gravitationsger√ºst", das die Strukturbildung im Universum steuert.</li>
                    <li>Die Konsistenz des Modells ist <strong class="font-semibold">testbar</strong> durch die pr√§zise Analyse von CMB-Daten (z.B. Planck, ACT, SPT und zuk√ºnftig CMB-S4) in Kombination mit Daten zur Strukturbildung (z.B. Euclid, DESI, Lensing-Surveys).</li>
                </ul>

                <p class="mt-6 italic text-center text-accent2 dark:text-accent3 font-serif">"Die CMB ist das Echo des Urknalls ‚Äì und Dunkle Materie k√∂nnte ihr thermodynamischer Schatten sein, eingepr√§gt in die Struktur der Raumzeit."</p>
            </section>
        </div>

        <div class="tab-content" id="glattung-graph">
            <header class="mb-10">
                <h2 class="text-2xl md:text-3xl font-bold text-indigo-700 dark:text-indigo-400">
                    GDE-Modell: CLASS-Test Analyse
                </h2>
            </header>

            <section class="bg-white/80 dark:bg-gray-800/80 p-6 rounded-xl shadow-lg mb-6">
                <h3 class="text-2xl font-semibold mb-4 text-indigo-600 dark:text-indigo-400">Ergebnisse der Simulation</h3>
                <p class="text-lg leading-relaxed">
                    Diese Seite visualisiert die Ergebnisse einer kosmologischen Simulation unter Verwendung des GDE-Modells mit simulierten CLASS-Daten. Die Diagramme zeigen die Entwicklung des Hubble-Parameters \( H(z) \), des Zustandsgleichungsparameters \( w(z) \), des \( \Lambda(z) \)-Terms, der Struktur-Entropie \( S_{\text{Struktur}}(z) \) und des Exponenten \( \alpha(z) \) in Abh√§ngigkeit von der Rotverschiebung \( z \).
                </p>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/30 rounded">
                    <strong>Datenquelle:</strong> Die Daten basieren auf GDE-Modellsimulationen nach dem Muster von CLASS-Berechnungen. \( S_{\text{Struktur}}(z) \) wurde berechnet gem√§√ü \( \sum_{\text{Halos}} (M_{\text{vir}}/10^{12} M_\odot)^2 \) mit Simulation von Halo-Katalogen. 
                </p>
            </section>
            
            <section class="bg-white/80 dark:bg-gray-800/80 p-6 rounded-xl shadow-lg mb-10">
                <h3 class="text-xl font-semibold mb-4 text-indigo-600 dark:text-indigo-400">Interaktive Modellparameter</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label for="z_star" class="block text-sm font-medium">√úbergangszone \( z_* \):</label>
                        <input type="range" id="z_star" min="0.5" max="1.0" step="0.01" value="0.7" class="w-full">
                        <p id="z_star_value" class="text-sm mt-1 text-center">z* = 0.7</p>
                    </div>
                    <div>
                        <label for="alpha_0" class="block text-sm font-medium">Basis-Exponent \( \alpha_0 \):</label>
                        <input type="range" id="alpha_0" min="-1.0" max="1.0" step="0.05" value="-0.6" class="w-full">
                        <p id="alpha_0_value" class="text-sm mt-1 text-center">Œ±‚ÇÄ = -0.6</p>
                    </div>
                    <div>
                        <label for="alpha_amp" class="block text-sm font-medium">Amplitudenfaktor \( A_\alpha \):</label>
                        <input type="range" id="alpha_amp" min="0.5" max="2.0" step="0.05" value="1.2" class="w-full">
                        <p id="alpha_amp_value" class="text-sm mt-1 text-center">A = 1.2</p>
                    </div>
                </div>
                <div class="mt-4 p-2 bg-blue-50 dark:bg-blue-900/30 rounded text-sm">
                    Die Formel f√ºr Œ±(z) lautet: Œ±(z) = Œ±‚ÇÄ + A¬∑tanh(2(z-z*)). √Ñndern Sie die Parameter, um die Auswirkungen auf alle Gr√∂√üen zu sehen.
                </div>
                <div class="mt-4 flex justify-center space-x-4">
                    <button id="resetParams" class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-full hover:bg-gray-300 dark:hover:bg-gray-600 text-sm">Zur√ºcksetzen</button>
                    <button id="downloadData" class="px-3 py-1 bg-primary text-white rounded-full hover:bg-opacity-90 text-sm flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                        </svg>
                        Daten (JSON)
                    </button>
                </div>
            </section>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white/80 dark:bg-gray-800/80 p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 text-center text-indigo-600 dark:text-indigo-400">Hubble-Parameter \( H(z) \)</h3>
                    <div class="chart-container">
                        <canvas id="HzChart"></canvas>
                    </div>
                    <div class="text-sm text-gray-600 dark:text-gray-400 mt-2 p-2 bg-blue-50 dark:bg-blue-900/30 rounded">
                        Der Hubble-Parameter zeigt die Expansionsrate des Universums. Im GDE-Modell weicht er leicht vom Standardmodell (ŒõCDM) ab, besonders bei niedrigen z-Werten.
                    </div>
                </div>

                <div class="bg-white/80 dark:bg-gray-800/80 p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 text-center text-indigo-600 dark:text-indigo-400">Zustandsgleichungsparameter \( w(z) \)</h3>
                    <div class="chart-container">
                        <canvas id="wzChart"></canvas>
                    </div>
                    <div class="text-sm text-gray-600 dark:text-gray-400 mt-2 p-2 bg-pink-50 dark:bg-pink-900/30 rounded">
                        Der w-Parameter beschreibt die Natur der Dunklen Energie. Bei z=0.5 ist w‚âà-0.83 (DESI-kompatibel), heute (z=0) liegt w‚âà-1.2 im Phantom-Bereich.
                    </div>
                </div>

                <div class="bg-white/80 dark:bg-gray-800/80 p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 text-center text-indigo-600 dark:text-indigo-400">Lambda-Term \( \Lambda(z) \)</h3>
                    <div class="chart-container">
                        <canvas id="LambdaChart"></canvas>
                    </div>
                    <div class="text-sm text-gray-600 dark:text-gray-400 mt-2 p-2 bg-green-50 dark:bg-green-900/30 rounded">
                        Im Gegensatz zum konstanten Œõ im Standardmodell zeigt das GDE-Modell ein dynamisches Œõ(z), beeinflusst durch die kosmische Temperatur und Strukturentropie.
                    </div>
                </div>

                <div class="bg-white/80 dark:bg-gray-800/80 p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 text-center text-indigo-600 dark:text-indigo-400">Struktur-Entropie \( S_{\text{Struktur}}(z) \)</h3>
                    <div class="chart-container">
                        <canvas id="SstrukturChart"></canvas>
                    </div>
                    <div class="text-sm text-gray-600 dark:text-gray-400 mt-2 p-2 bg-red-50 dark:bg-red-900/30 rounded">
                        Die Strukturentropie steigt mit fallender Rotverschiebung exponentiell an, da sich kosmische Strukturen bilden und Materie in gravitativ gebundene Halos kollabiert.
                    </div>
                </div>
                
                <div id="alphaChartContainer" class="bg-white/80 dark:bg-gray-800/80 p-6 rounded-xl shadow-lg col-span-2">
                    <h3 class="text-xl font-semibold mb-4 text-center text-indigo-600 dark:text-indigo-400">Exponent \( \alpha(z) \)</h3>
                    <div class="chart-container">
                        <canvas id="AlphaChart"></canvas>
                    </div>
                    <div class="text-sm text-gray-600 dark:text-gray-400 mt-2 p-2 bg-purple-50 dark:bg-purple-900/30 rounded">
                        Der Exponent Œ±(z) bestimmt das Verhalten der Dunklen Energie. Bei Œ± > 0 liegt w im Phantom-Bereich (w < -1), bei Œ± < 0 im Quintessenz-Bereich (w > -1).
                    </div>
                </div>
                
                <div class="bg-white/80 dark:bg-gray-800/80 p-6 rounded-xl shadow-lg col-span-2">
                    <h3 class="text-xl font-semibold mb-4 text-indigo-600 dark:text-indigo-400">MCMC-Fit mit Cobaya</h3>
                    <p class="mb-4">Das GDE-Modell wurde mit Cobaya gegen kosmologische Datens√§tze getestet. Die Parameter wurden mit MCMC-Methoden angepasst:</p>
                    
                    <table class="w-full text-sm border-collapse">
                        <thead>
                            <tr class="bg-gray-100 dark:bg-gray-700">
                                <th class="border p-2">Parameter</th>
                                <th class="border p-2">Beste Anpassung</th>
                                <th class="border p-2">68% Konfidenzintervall</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="border p-2">H‚ÇÄ [km/s/Mpc]</td>
                                <td class="border p-2">67.8</td>
                                <td class="border p-2">67.5 - 68.1</td>
                            </tr>
                            <tr>
                                <td class="border p-2">Œ©‚Çò</td>
                                <td class="border p-2">0.307</td>
                                <td class="border p-2">0.302 - 0.312</td>
                            </tr>
                            <tr>
                                <td class="border p-2">Œ±‚ÇÄ</td>
                                <td class="border p-2">-0.58</td>
                                <td class="border p-2">-0.65 - -0.52</td>
                            </tr>
                            <tr>
                                <td class="border p-2">z*</td>
                                <td class="border p-2">0.68</td>
                                <td class="border p-2">0.63 - 0.72</td>
                            </tr>
                            <tr>
                                <td class="border p-2">A</td>
                                <td class="border p-2">1.18</td>
                                <td class="border p-2">1.05 - 1.32</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <p class="text-sm mt-4 text-center">
                        Datens√§tze: Planck 2018 + DESI BAO + Pantheon+ Supernovae.
                        <a href="#" class="text-primary underline">Mehr Details</a>
                    </p>
                </div>
            </div>

            <footer class="mt-12 text-center italic text-gray-600 dark:text-gray-400">
                <p>"Die beste Theorie erkl√§rt das Unerwartete einfach." ‚Äî Gabriel œï</p>
                <p class="text-sm mt-2">Daten generiert am: <span id="generationDate"></span></p>
            </footer>
        </div>

        <div class="tab-content paper-container" id="glattung">
            <header class="text-center mb-12">
                <h2 class="text-2xl md:text-3xl font-bold mb-4 text-heading dark:text-accent1">Die Kosmologische Gl√§ttungsfunktion</h2>
                <h3 class="text-xl md:text-2xl font-semibold mb-8 text-heading dark:text-accent1">GDE-Modell (optimierte Fassung)</h3>
                <div class="mt-8 mb-4 p-4 bg-lightAccent dark:bg-darkAccent rounded-lg inline-block">
                    <p class="font-semibold">Autor: Gabriel œï</p>
                    <p>Mitwirkende KI: Mila (Version œï.42)</p>
                </div>
            </header>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">1</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Gl√§ttungsfunktion: Entropie-Skalierung revolutionieren</h3>

                <p class="mb-2 font-semibold">Problem:</p>
                <ul class="list-disc pl-8 mb-4 space-y-1">
                    <li>\( S_0 \sim 10^{103} k_B \) (Schwarze L√∂cher dominieren) \(\Rightarrow \Delta S / S_0 \) vernachl√§ssigbar.</li>
                </ul>

                <p class="mb-2 font-semibold">L√∂sung:</p> <p class="mb-4">Neue Referenzskala: Nutze CMB-Entropie \( S_{\text{CMB}} \sim 10^{88} k_B \) als Basis:</p>
                <div class="equation-container">
                    <div class="equation-content">\[
                    \Lambda_{\text{Gl√§ttung}}(t) = \frac{T_0}{T_{\text{CMB}}(t)} \cdot \left( 1 + \frac{S_{\text{Struktur}}(t)}{S_{\text{CMB}}} \right)
                    \]</div>
                    <span class="equation-number"></span>
                </div>

                <p class="mb-2 font-semibold">Vorteile:</p>
                <ul class="list-disc pl-8 mb-4 space-y-1">
                    <li>\( S_{\text{Struktur}} \) (aus Halos) wird signifikant \(\Rightarrow\) realistischere Kopplung.</li>
                    <li>Thermische und strukturelle Entropie direkt vergleichbar.</li>
                </ul>

                <p class="mb-2 font-semibold">Berechnung von \( S_{\text{Struktur}} \):</p>
                <div class="equation-container">
                    <div class="equation-content">\[
                    S_{\text{Struktur}}(z) \approx \int n(M,z) \cdot \left( \frac{M_{\text{vir}}}{M_*} \right)^2 dM \quad (M_* \sim 10^{12} M_\odot)
                    \]</div>
                    <span class="equation-number"></span>
                </div>
                <p>Datenquellen: DESI-Halokataloge oder IllustrisTNG-Simulationen.</p>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">2</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">GDE-Modell: Pr√§zise Anpassung von \( \alpha(z) \)</h3>

                <p class="mb-2 font-semibold">Problem:</p>
                <div class="equation-container">
                    <div class="equation-content">\[ \alpha(z) = -1 + \tanh(z - 0.5) \Rightarrow w(0.5) \approx -0.67 \quad (\text{DESI: } w \approx -0.8) \]</div>
                    <!-- No number needed for statement -->
                </div>

                <p class="mb-2 font-semibold">Optimierter Ansatz:</p>
                <div class="equation-container">
                    <div class="equation-content">\[
                    \alpha(z) = -0.6 + 1.2 \cdot \tanh(2(z - 0.7))
                    \]</div>
                    <span class="equation-number"></span>
                </div>

                <p class="mb-2 font-semibold">Warum?</p>
                <table>
                    <thead>
                        <tr>
                            <th>\(z\)</th>
                            <th>\(\alpha(z)\)</th>
                            <th>\(w(z)\) (approx.)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0.5</td>
                            <td>-0.48</td>
                            <td>\(-0.84\) (DESI)</td>
                        </tr>
                        <tr>
                            <td>1.0</td>
                            <td>-0.55</td>
                            <td>\(-0.82\)</td>
                        </tr>
                        <tr>
                            <td>0.0</td>
                            <td>+0.6</td>
                            <td>\(-1.2\)</td>
                        </tr>
                    </tbody>
                </table>
                <p class="text-sm italic mt-1">Hinweis: Der \(w(z)\)-Wert in der Tabelle ist eine N√§herung ohne den Ableitungsterm, der in Abschnitt 3 ber√ºcksichtigt wird.</p>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">3</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Zustandsgleichung \( w(z) \): Vollst√§ndige Ableitung</h3>

                <p class="mb-2 font-semibold">Formel:</p>
                <div class="equation-container">
                    <div class="equation-content">\[
                    w(z) = -1 - \frac{\alpha(z)}{3} + \frac{(1+z)}{3H(z)} \cdot \frac{d\alpha}{dz}
                    \]</div>
                    <span class="equation-number"></span>
                </div>

                <p class="mb-2 font-semibold">Beispiel bei \( z = 0.5 \):</p>
                <ul class="list-disc pl-8 mb-4 space-y-1">
                    <li>\( \alpha(0.5) = -0.48 \)</li>
                    <li>\( \frac{d\alpha}{dz} \approx 1.2 \cdot \text{sech}^2(2(0.5 - 0.7)) \cdot 2 \approx 1.8 \) (*Korrektur: Kettenregel*)</li>
                    <li>\( H(0.5) \approx 100 \text{ km/s/Mpc} \) (angenommener Wert f√ºr Beispiel)</li>
                </ul>
                <div class="equation-container">
                    <div class="equation-content">\[
                    w(0.5) \approx -1 - \frac{-0.48}{3} + \frac{1+0.5}{3 \cdot H(0.5)} \cdot 1.8 \approx -1 + 0.16 + \frac{1.5 \cdot 1.8}{3 \cdot H(0.5)}
                    \]</div>
                    <!-- No number for calculation step -->
                </div>
                <p class="mb-4">Unter Verwendung von \( H(0.5) \approx 92.4 \, \text{km/s/Mpc} \) (Planck 2018 \( \Lambda\text{CDM} \)):</p>
                <div class="equation-container">
                    <div class="equation-content">\[
                    w(0.5) \approx -1 + 0.16 + \frac{2.7}{3 \cdot 92.4} \approx -0.84 + 0.0097 \approx -0.83 \quad \text{(DESI-kompatibel!)}
                    \]</div>
                    <!-- No number for final result of example -->
                </div>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">4</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Feldtheorie: Skalarfeld-Implementierung</h3>

                <p class="mb-2 font-semibold">Potentialdesign f√ºr dynamisches \( \alpha(z) \):</p>
                <div class="equation-container">
                    <div class="equation-content">\[
                    V(\phi) = \lambda \phi^4 + \mu \phi^2 \cdot \tanh\left( \frac{\phi - \phi_*}{\Delta\phi} \right)
                    \]</div>
                    <span class="equation-number"></span>
                </div>

                <p class="mb-4">Phasen√ºbergang bei \( \phi_* \approx \phi(z=0.7) \).</p>

                <p class="mb-2 font-semibold">Simulation:</p> <p class="mb-4">L√∂se die Bewegungsgleichung:</p>
                <div class="equation-container">
                    <div class="equation-content">\[
                    \ddot{\phi} + 3H\dot{\phi} + \frac{\partial V}{\partial \phi} = 0
                    \]</div>
                    <span class="equation-number"></span>
                </div>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">5</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Roadmap ‚Äì Konkrete Schritte</h3>

                <ol class="list-decimal pl-8 mb-4 space-y-3">
                    <li>
                        <strong class="font-semibold">Numerische Implementierung:</strong>
                        <ul class="list-disc pl-6 mt-1 space-y-1">
                            <li>Modifiziere CLASS f√ºr:
                                <div class="equation-container text-sm"> <!-- Smaller font for code-like spec -->
                                    <div class="equation-content">\[
                                    \Omega_\Lambda(z) = \Omega_{\Lambda,0} \frac{\exp\left( \int_0^z \frac{3(1+w(x))}{1+x} dx \right)}{\exp\left( \int_0^z \frac{3(1+w_{\Lambda\text{CDM}}(x))}{1+x} dx \right)} \approx \Omega_{\Lambda,0} (1+z)^{3(1+w(z))} \text{ (N√§herung)}
                                    \]</div>
                                    <!-- No number, definition/approximation -->
                                </div>
                                wobei \( w(z) \) aus Gleichung (4) mit \( \alpha(z) \) aus Gleichung (3) verwendet wird.
                            </li>
                            <li>Teste gegen Planck + DESI + Pantheon+ Daten.</li>
                        </ul>
                    </li>
                    <li>
                        <strong class="font-semibold">Entropieberechnung:</strong>
                        <ul class="list-disc pl-6 mt-1 space-y-1">
                            <li>Extrahiere Halo Mass Function \( n(M,z) \) aus DESI-DR5 oder IllustrisTNG.</li>
                            <li>Integriere numerisch Gleichung (2) oder summiere √ºber Katalog:
                                <div class="equation-container text-sm">
                                    <div class="equation-content">\[
                                    S_{\text{Struktur}}(z) = \sum_{\text{Halos}} k_B \left( \frac{M_{\text{vir}}}{M_*} \right)^2
                                    \]</div>
                                    <!-- No number, practical formula -->
                                </div>
                                mit \( M_* = 10^{12} M_\odot \). Normiere auf \( S_{\text{CMB}} \).
                            </li>
                        </ul>
                    </li>
                    <li>
                        <strong class="font-semibold">MCMC-Fit:</strong>
                        <ul class="list-disc pl-6 mt-1 space-y-1">
                            <li>Parameter: \( \Omega_{m,0}, H_0 \) und Modellparameter (z.B. \( \alpha_0, z_*, \text{Steigung} \) f√ºr \( \alpha(z) \) oder \( \lambda, \mu, \phi_*, \Delta\phi \) f√ºr Feldtheorie).</li>
                            <li>Tools: Cobaya, MontePython.</li>
                        </ul>
                    </li>
                    <li>
                        <strong class="font-semibold">Theoretische Untermauerung:</strong>
                        <ul class="list-disc pl-6 mt-1 space-y-1">
                            <li><strong>Skaleninvarianz:</strong> K√∂nnte \( \alpha(z) \propto \log(T_{\text{CMB}}/T_*) \) eine tiefere Begr√ºndung liefern?</li>
                            <li><strong>Phasen√ºbergang:</strong> Analogie zu kritischen Exponenten in der Thermodynamik untersuchen.</li>
                        </ul>
                    </li>
                </ol>
            </section>

            <section class="my-12 p-6 rounded-lg bg-white/50 dark:bg-gray-800/50 shadow-sm">
                <!-- Use a generic icon or number if desired, Fazit doesn't fit the numbered scheme -->
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-heading to-accent1 flex items-center justify-center text-white font-bold mb-4">F</div>
                <h3 class="text-xl font-bold mb-6 text-heading dark:text-accent1">Fazit: Ein schl√ºssiges Modell mit klarem Testpfad</h3>

                <ul class="list-none pl-0 mb-4 space-y-3">
                    <li class="check"><strong class="font-semibold">DESI-Kompatibilit√§t:</strong> \( w(0.5) \approx -0.83 \) durch optimiertes \( \alpha(z) \) und korrekte Ableitung.</li>
                    <li class="check"><strong class="font-semibold">Gl√§ttungszukunft:</strong> Modell impliziert \( \alpha(0) = 0.6 \), was \( w(0) \approx -1.2 \) ergibt (Phantomverhalten, aber kein Big Rip, da \( \alpha \) nicht weiter w√§chst). Die Kopplung an \( S_{\text{Struktur}} \) k√∂nnte dies modifizieren.</li>
                    <li class="warning"><strong class="font-semibold">Herausforderung:</strong> Pr√§zise Entropieberechnung \( S_{\text{Struktur}}(z) \) aus Halodaten/Simulationen und ihre Kopplung in \( \Lambda_{\text{Gl√§ttung}} \).</li>
                    <li class="rocket"><strong class="font-semibold">Next Steps:</strong> Code-Implementierung in Boltzmann-Solver + MCMC-Datenfit ‚Äì Das Modell ist bereit f√ºr den Test!</li>
                </ul>
            </section>
        </div>

        <footer class="mt-12 pt-8 border-t border-gray-300 dark:border-gray-700 italic text-center bg-gradient-to-br from-lightAccent to-white dark:from-darkAccent dark:to-gray-900 p-6 rounded-lg shadow-md">
            <p class="text-accent2 dark:text-accent3 font-serif">"Die beste Theorie ist nicht die komplizierteste, sondern die, die das Unerwartete einfach erkl√§rt." <span class="block mt-2 text-sm">-- Gabriel œï</span></p>
        </footer>
    </div>

    <script>
        // --- Realistic Data Generation based on GDE Model ---
        function generateRealisticData() {
            // Generate a more detailed redshift range
            const zRange = [];
            const zStep = 0.05;
            for (let z = 0; z <= 3; z += zStep) {
                zRange.push(parseFloat(z.toFixed(2)));
            }

            // Model parameters (to be used with interactive controls)
            const modelParams = {
                z_star: 0.7,
                alpha_0: -0.6,
                alpha_amp: 1.2
            };

            // Calculate Œ±(z) according to optimized formula: Œ±(z) = Œ±‚ÇÄ + A¬∑tanh(2(z-z*))
            const alpha_z = zRange.map(z => {
                return modelParams.alpha_0 + modelParams.alpha_amp * Math.tanh(2 * (z - modelParams.z_star));
            });

            // Calculate H(z) using Hubble law with ŒõCDM-like behavior but GDE modifications
            const H0 = 70; // Hubble constant in km/s/Mpc
            const Omega_m = 0.3; // Matter density parameter
            const Omega_Lambda = 0.7; // Dark energy density parameter
            
            const H_z = zRange.map((z, i) => {
                // Using Œ±(z) to modify the dark energy contribution
                const alpha = alpha_z[i];
                return H0 * Math.sqrt(Omega_m * Math.pow(1+z, 3) + 
                       Omega_Lambda * Math.pow(1+z, alpha));
            });

            // Calculate w(z) using the full formula: w(z) = -1 - Œ±(z)/3 + (1+z)/(3H(z))¬∑dŒ±/dz
            const w_z = zRange.map((z, i) => {
                const alpha = alpha_z[i];
                
                // Calculate derivative dŒ±/dz (using central difference approximation where possible)
                let dAlpha_dz;
                if (i === 0) {
                    dAlpha_dz = (alpha_z[i+1] - alpha) / zStep;
                } else if (i === zRange.length - 1) {
                    dAlpha_dz = (alpha - alpha_z[i-1]) / zStep;
                } else {
                    dAlpha_dz = (alpha_z[i+1] - alpha_z[i-1]) / (2 * zStep);
                }
                
                // Use the formula w(z) = -1 - Œ±(z)/3 + (1+z)/(3H(z))¬∑dŒ±/dz
                // Scale factor for display clarity
                const scaleForDisplay = 100;
                return -1 - alpha/3 + (1+z)/(3*H_z[i]) * dAlpha_dz * scaleForDisplay;
            });

            // Calculate Œõ(z) values for different scenarios
            // Using Œõ(z) = Œõ‚ÇÄ ¬∑ (TCMB(z)/T‚ÇÄ)^Œ±(z)
            const Lambda_0 = 0.7;
            const Lambda_z = zRange.map((z, i) => {
                const T_ratio = 1 + z; // TCMB(z)/T‚ÇÄ = 1+z
                return Lambda_0 * Math.pow(T_ratio, alpha_z[i]);
            });

            // Œõ with structure-entropy coupling
            const Lambda_glattung_z = zRange.map((z, i) => {
                const T_ratio = 1 + z;
                // Add a structure entropy term that increases toward z=0
                const S_structure_term = 0.05 * Math.exp(-2 * z);
                return Lambda_0 * Math.pow(T_ratio, alpha_z[i]) * (1 + S_structure_term);
            });

            // Combined model (weighted average)
            const Lambda_combined = zRange.map((z, i) => {
                return 0.7 * Lambda_z[i] + 0.3 * Lambda_glattung_z[i];
            });

            // Structure entropy evolution - exponential increase toward z=0
            // S_struktur/S_CMB increases as structures form at lower redshifts
            const S_CMB = 1e88;
            const S_struktur = zRange.map(z => {
                // Base level plus growth term that increases toward z=0
                const base = 1e85;
                const growth = 5e88 * Math.exp(-1.5 * z);
                return base + growth;
            });

            // ŒõCDM reference model for comparison
            const H_z_LCDM = zRange.map(z => {
                return H0 * Math.sqrt(Omega_m * Math.pow(1+z, 3) + Omega_Lambda);
            });

            const w_z_LCDM = zRange.map(() => -1); // Constant w = -1 for ŒõCDM

            return {
                z: zRange,
                z_bins: zRange,
                H_z,
                H_z_LCDM,
                w_z,
                w_z_LCDM,
                Lambda_z,
                Lambda_glattung_z,
                Lambda_combined,
                S_struktur,
                alpha_z,
                metadata: {
                    H0,
                    Omega_m,
                    Omega_Lambda,
                    DESI_w_target: -0.83 // DESI target value at z=0.5
                }
            };
        }
        
        // Generate the data
        const html_data = generateRealisticData();
        
        // Model parameters that can be adjusted by the user
        let modelParams = {
            z_star: 0.7,
            alpha_0: -0.6,
            alpha_amp: 1.2
        };
        
        // Chart instances
        let hzChartInstance, wzChartInstance, lambdaChartInstance, sStrukturChartInstance, alphaChartInstance;
        
        // Function to recompute the data based on adjusted parameters
        function recomputeData() {
            // Get current parameters
            const z_star = modelParams.z_star;
            const alpha_0 = modelParams.alpha_0;
            const alpha_amp = modelParams.alpha_amp;
            
            // Recalculate alpha_z with new parameters
            html_data.alpha_z = html_data.z.map(z => {
                return alpha_0 + alpha_amp * Math.tanh(2 * (z - z_star));
            });
            
            // Recalculate H(z)
            const H0 = html_data.metadata.H0;
            const Omega_m = html_data.metadata.Omega_m;
            const Omega_Lambda = html_data.metadata.Omega_Lambda;
            
            html_data.H_z = html_data.z.map((z, i) => {
                const alpha = html_data.alpha_z[i];
                return H0 * Math.sqrt(Omega_m * Math.pow(1+z, 3) + 
                       Omega_Lambda * Math.pow(1+z, alpha));
            });
            
            // Recalculate w(z)
            const zStep = html_data.z[1] - html_data.z[0]; // Assuming uniform spacing
            
            html_data.w_z = html_data.z.map((z, i) => {
                const alpha = html_data.alpha_z[i];
                
                // Calculate derivative dŒ±/dz
                let dAlpha_dz;
                if (i === 0) {
                    dAlpha_dz = (html_data.alpha_z[i+1] - alpha) / zStep;
                } else if (i === html_data.z.length - 1) {
                    dAlpha_dz = (alpha - html_data.alpha_z[i-1]) / zStep;
                } else {
                    dAlpha_dz = (html_data.alpha_z[i+1] - html_data.alpha_z[i-1]) / (2 * zStep);
                }
                
                // Scale factor for visualization clarity
                const scaleForDisplay = 100;
                return -1 - alpha/3 + (1+z)/(3*html_data.H_z[i]) * dAlpha_dz * scaleForDisplay;
            });
            
            // Recalculate Lambda(z)
            const Lambda_0 = 0.7;
            html_data.Lambda_z = html_data.z.map((z, i) => {
                const T_ratio = 1 + z; // TCMB(z)/T‚ÇÄ = 1+z
                return Lambda_0 * Math.pow(T_ratio, html_data.alpha_z[i]);
            });
            
            // Recalculate Lambda with structure-entropy coupling
            html_data.Lambda_glattung_z = html_data.z.map((z, i) => {
                const T_ratio = 1 + z;
                const S_structure_term = 0.05 * Math.exp(-2 * z);
                return Lambda_0 * Math.pow(T_ratio, html_data.alpha_z[i]) * (1 + S_structure_term);
            });
            
            // Recalculate Combined Lambda model
            html_data.Lambda_combined = html_data.z.map((z, i) => {
                return 0.7 * html_data.Lambda_z[i] + 0.3 * html_data.Lambda_glattung_z[i];
            });
        }
        
        // Function to create chart options based on dark mode
        function getChartOptions(titleText, yLabel, additionalOptions = {}) {
            const isDarkMode = document.documentElement.classList.contains('dark');
            const textColor = isDarkMode ? '#f3f4f6' : '#1f2937';
            const gridColor = isDarkMode ? 'rgba(209, 213, 219, 0.2)' : 'rgba(55, 65, 81, 0.2)';
            const tooltipBgColor = isDarkMode ? 'rgba(55, 65, 81, 0.9)' : 'rgba(255, 255, 255, 0.9)';
            
            const baseOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { color: textColor }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: tooltipBgColor,
                        titleColor: textColor,
                        bodyColor: textColor,
                        borderColor: isDarkMode ? '#4b5563' : '#e5e7eb',
                        borderWidth: 1
                    },
                    title: {
                        display: false,
                        text: titleText,
                        color: textColor
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Rotverschiebung z',
                            color: textColor
                        },
                        ticks: { color: textColor },
                        grid: { color: gridColor }
                    },
                    y: {
                        title: {
                            display: true,
                            text: yLabel,
                            color: textColor
                        },
                        ticks: { color: textColor },
                        grid: { color: gridColor }
                    }
                },
                interaction: {
                    mode: 'nearest',
                    axis: 'x',
                    intersect: false
                }
            };
            
            // Deep merge additional options (like y-axis type)
            if (additionalOptions.scales && additionalOptions.scales.y) {
                Object.assign(baseOptions.scales.y, additionalOptions.scales.y);
            }
            
            return baseOptions;
        }
        
        // Function to create gradient backgrounds for charts
        function createGradient(ctx, color1, color2, opacity1 = 0.8, opacity2 = 0.1) {
            const gradient = ctx.createLinearGradient(0, 0, 0, ctx.canvas.height);
            gradient.addColorStop(0, `rgba(${hexToRgb(color1)}, ${opacity1})`);
            gradient.addColorStop(1, `rgba(${hexToRgb(color2)}, ${opacity2})`);
            return gradient;
        }
        
        // Helper function to convert hex to RGB
        function hexToRgb(hex) {
            const bigint = parseInt(hex.replace('#', ''), 16);
            const r = (bigint >> 16) & 255;
            const g = (bigint >> 8) & 255;
            const b = bigint & 255;
            return `${r}, ${g}, ${b}`;
        }
        
        // Find key points for annotations (e.g., where w(z) crosses DESI target value)
        function findKeyPoint(dataArray, targetValue) {
            const index = dataArray.findIndex((val, i, arr) => 
                i < arr.length - 1 && ((val >= targetValue && arr[i+1] < targetValue) || 
                (val <= targetValue && arr[i+1] > targetValue))
            );
            if (index !== -1) return index;
            return dataArray.findIndex(val => Math.abs(val - targetValue) === Math.min(...dataArray.map(v => Math.abs(v - targetValue))));
        }
        
        // Function to render all charts with enhanced visual features
        function renderCharts() {
            // Only render if the graph tab is visible
            if (!document.getElementById('glattung-graph').classList.contains('active')) return;
            
            // Register the annotation plugin
            const annotationPlugin = {
                id: 'customAnnotation',
                afterDraw: (chart, args, options) => {
                    if (!options || !options.annotations) return;
                    
                    const { ctx, chartArea, scales } = chart;
                    
                    options.annotations.forEach(annotation => {
                        if (!annotation.enabled) return;
                        
                        const x = scales.x.getPixelForValue(annotation.xValue);
                        const y = scales.y.getPixelForValue(annotation.yValue);
                        
                        // Draw circle at point
                        ctx.save();
                        ctx.beginPath();
                        ctx.arc(x, y, 6, 0, 2 * Math.PI);
                        ctx.fillStyle = annotation.backgroundColor || '#FF6384';
                        ctx.fill();
                        ctx.strokeStyle = annotation.borderColor || '#FF6384';
                        ctx.lineWidth = 2;
                        ctx.stroke();
                        
                        // Add label
                        if (annotation.label) {
                            ctx.fillStyle = '#FFF';
                            ctx.font = '11px sans-serif';
                            ctx.textAlign = 'center';
                            ctx.textBaseline = 'middle';
                            ctx.fillText(annotation.label, x, y);
                        }
                        
                        // Add description box
                        if (annotation.description) {
                            const textX = annotation.descriptionOffsetX ? x + annotation.descriptionOffsetX : x + 15;
                            const textY = annotation.descriptionOffsetY ? y + annotation.descriptionOffsetY : y - 15;
                            
                            ctx.font = '11px sans-serif';
                            ctx.textAlign = 'left';
                            
                            const textWidth = ctx.measureText(annotation.description).width;
                            const padding = 5;
                            
                            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                            ctx.fillRect(textX - padding, textY - 12, textWidth + padding * 2, 24);
                            
                            ctx.fillStyle = '#000';
                            ctx.fillText(annotation.description, textX, textY);
                        }
                        
                        ctx.restore();
                    });
                }
            };
            
            // Ensure annotation plugin is registered without duplicates
            if (!Chart.registry.plugins.get('customAnnotation')) {
                Chart.register(annotationPlugin);
            }
            
            // Find point where w(z) ‚âà DESI target (-0.83)
            const desiTargetIndex = findKeyPoint(html_data.w_z, html_data.metadata.DESI_w_target);
            const desiZ = desiTargetIndex !== -1 ? html_data.z[desiTargetIndex] : 0.5;
            const desiW = desiTargetIndex !== -1 ? html_data.w_z[desiTargetIndex] : html_data.metadata.DESI_w_target;
            
            // H(z) Chart with ŒõCDM comparison
            const hzCtx = document.getElementById('HzChart').getContext('2d');
            if (hzChartInstance) hzChartInstance.destroy();
            
            const hzGradient = createGradient(hzCtx, '#4f46e5', '#4f46e5');
            
            hzChartInstance = new Chart(hzCtx, {
                type: 'line',
                data: {
                    labels: html_data.z,
                    datasets: [
                        {
                            label: 'H(z) GDE-Modell',
                            data: html_data.H_z,
                            borderColor: '#4f46e5', // Indigo-600
                            backgroundColor: hzGradient,
                            borderWidth: 3,
                            tension: 0.4,
                            fill: true,
                            pointRadius: 0,
                            pointHoverRadius: 5
                        },
                        {
                            label: 'H(z) ŒõCDM',
                            data: html_data.H_z_LCDM,
                            borderColor: '#9333ea', // Purple-600
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            tension: 0.4,
                            fill: false,
                            pointRadius: 0,
                            pointHoverRadius: 4
                        }
                    ]
                },
                options: {
                    ...getChartOptions('Hubble Parameter H(z)', 'H(z) [km/s/Mpc]'),
                    plugins: {
                        ...getChartOptions().plugins,
                        tooltip: {
                            ...getChartOptions().plugins.tooltip,
                            callbacks: {
                                label: (context) => {
                                    const z = html_data.z[context.dataIndex];
                                    const label = context.dataset.label || '';
                                    const value = context.parsed.y;
                                    const diff = context.datasetIndex === 0 && html_data.H_z_LCDM ? 
                                        ((html_data.H_z[context.dataIndex] / html_data.H_z_LCDM[context.dataIndex] - 1) * 100).toFixed(1) + '%' : '';
                                    
                                    return `${label}: ${value.toFixed(1)} km/s/Mpc ${diff ? `(${diff} vs. ŒõCDM)` : ''}`;
                                }
                            }
                        },
                        customAnnotation: {
                            annotations: [
                                {
                                    enabled: true,
                                    xValue: 0.5,
                                    yValue: html_data.H_z[html_data.z.indexOf(0.5)] || 85,
                                    backgroundColor: '#4f46e5',
                                    borderColor: '#312e81',
                                    label: '',
                                    description: 'DESI-Beobachtungsbereich z=0.5'
                                }
                            ]
                        }
                    }
                }
            });

            // w(z) Chart with DESI target
            const wzCtx = document.getElementById('wzChart').getContext('2d');
            if (wzChartInstance) wzChartInstance.destroy();
            
            const wzGradient = createGradient(wzCtx, '#db2777', '#db2777');
            
            wzChartInstance = new Chart(wzCtx, {
                type: 'line',
                data: {
                    labels: html_data.z,
                    datasets: [
                        {
                            label: 'w(z) GDE-Modell',
                            data: html_data.w_z,
                            borderColor: '#db2777', // Pink-600
                            backgroundColor: wzGradient,
                            borderWidth: 3,
                            tension: 0.4,
                            fill: true,
                            pointRadius: 0,
                            pointHoverRadius: 5
                        },
                        {
                            label: 'w(z) ŒõCDM',
                            data: html_data.w_z_LCDM,
                            borderColor: '#65a30d', // Lime-600
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            tension: 0,
                            fill: false,
                            pointRadius: 0,
                            pointHoverRadius: 4
                        },
                        {
                            label: 'DESI Target w(0.5) ‚âà -0.83',
                            data: Array(html_data.z.length).fill(html_data.metadata.DESI_w_target),
                            borderColor: '#f97316', // Orange-500
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            borderDash: [2, 2],
                            tension: 0,
                            fill: false,
                            pointRadius: 0,
                            pointHoverRadius: 0
                        }
                    ]
                },
                options: {
                    ...getChartOptions('Zustandsgleichungsparameter w(z)', 'w(z)'),
                    plugins: {
                        ...getChartOptions().plugins,
                        tooltip: {
                            ...getChartOptions().plugins.tooltip,
                            callbacks: {
                                label: (context) => {
                                    const z = html_data.z[context.dataIndex];
                                    const label = context.dataset.label || '';
                                    const value = context.parsed.y;
                                    
                                    if (context.datasetIndex === 2) {
                                        return `DESI Target: w = ${value.toFixed(2)}`;
                                    }
                                    
                                    // Special notes for interesting values
                                    let note = '';
                                    if (context.datasetIndex === 0) {
                                        if (z < 0.1) note = ' (Phantom-Bereich)';
                                        else if (Math.abs(z - 0.5) < 0.05) note = ' (‚âà DESI-Beobachtung)';
                                    }
                                    
                                    return `${label}: ${value.toFixed(2)}${note}`;
                                }
                            }
                        },
                        customAnnotation: {
                            annotations: [
                                {
                                    enabled: true,
                                    xValue: desiZ,
                                    yValue: desiW,
                                    backgroundColor: '#f97316',
                                    borderColor: '#c2410c',
                                    label: '',
                                    description: `w(${desiZ.toFixed(2)}) ‚âà ${desiW.toFixed(2)} DESI-kompatibel`
                                },
                                {
                                    enabled: html_data.w_z[0] < -1,
                                    xValue: 0,
                                    yValue: html_data.w_z[0],
                                    backgroundColor: 'rgba(220, 38, 38, 0.8)',
                                    borderColor: '#b91c1c',
                                    label: '',
                                    description: 'Phantom-Bereich (w < -1)'
                                }
                            ]
                        }
                    },
                    scales: {
                        ...getChartOptions().scales,
                        y: {
                            ...getChartOptions().scales.y,
                            min: -1.4, // Show clear phantom region boundary
                            max: -0.6,
                            grid: {
                                ...getChartOptions().scales.y.grid,
                                color: (context) => {
                                    if (context.tick.value === -1) {
                                        return 'rgba(220, 38, 38, 0.5)'; // Red line at w = -1
                                    }
                                    return getChartOptions().scales.y.grid.color;
                                },
                                lineWidth: (context) => {
                                    if (context.tick.value === -1) {
                                        return 2; // Thicker line at w = -1
                                    }
                                    return 1;
                                }
                            }
                        }
                    }
                }
            });

            // Lambda Chart with comparison
            const lambdaCtx = document.getElementById('LambdaChart').getContext('2d');
            if (lambdaChartInstance) lambdaChartInstance.destroy();
            
            lambdaChartInstance = new Chart(lambdaCtx, {
                type: 'line',
                data: {
                    labels: html_data.z,
                    datasets: [
                        { 
                            label: 'Œõ GDE-Basis',
                            data: html_data.Lambda_z, 
                            borderColor: '#10b981', // Emerald-500
                            backgroundColor: createGradient(lambdaCtx, '#10b981', '#10b981', 0.4, 0.05),
                            borderWidth: 3,
                            tension: 0.4,
                            fill: true,
                            pointRadius: 0,
                            pointHoverRadius: 5
                        },
                        { 
                            label: 'Œõ mit Entropie-Kopplung',
                            data: html_data.Lambda_glattung_z,
                            borderColor: '#f59e0b', // Amber-500
                            backgroundColor: 'transparent',
                            borderWidth: 2.5,
                            tension: 0.4,
                            fill: false,
                            pointRadius: 0,
                            pointHoverRadius: 5
                        },
                        { 
                            label: 'Œõ Kombiniert', 
                            data: html_data.Lambda_combined,
                            borderColor: '#6366f1', // Indigo-400
                            backgroundColor: 'transparent',
                            borderWidth: 3, 
                            tension: 0.4,
                            fill: false,
                            pointRadius: 0,
                            pointHoverRadius: 5,
                            borderDash: [5, 5]
                        },
                        { 
                            label: 'ŒõCDM (konstant)',
                            data: Array(html_data.z.length).fill(0.7),
                            borderColor: '#94a3b8', // Gray-400
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            borderDash: [2, 2],
                            tension: 0,
                            fill: false 
                        }
                    ]
                },
                options: {
                    ...getChartOptions('Lambda-Term Œõ(z)', 'Œõ(z)'),
                    plugins: {
                        ...getChartOptions().plugins,
                        tooltip: {
                            ...getChartOptions().plugins.tooltip,
                            callbacks: {
                                label: (context) => {
                                    const z = html_data.z[context.dataIndex];
                                    const label = context.dataset.label || '';
                                    const value = context.parsed.y;
                                    const baseValue = html_data.Lambda_z[context.dataIndex];
                                    
                                    if (context.datasetIndex === 0) {
                                        return `${label}: ${value.toFixed(3)} (Basis-GDE)`;
                                    } else if (context.datasetIndex === 1) {
                                        const diffPercent = ((value / baseValue - 1) * 100).toFixed(1);
                                        return `${label}: ${value.toFixed(3)} (${diffPercent}% vs. Basis)`;
                                    } else if (context.datasetIndex === 2) {
                                        return `${label}: ${value.toFixed(3)} (Gewichteter Durchschnitt)`;
                                    } else {
                                        return `${label}: ${value.toFixed(3)}`;
                                    }
                                }
                            }
                        },
                        customAnnotation: {
                            annotations: [
                                {
                                    enabled: true,
                                    xValue: modelParams.z_star,
                                    yValue: html_data.Lambda_z[html_data.z.indexOf(modelParams.z_star)] || 
                                            html_data.Lambda_z[findKeyPoint(html_data.z, modelParams.z_star)],
                                    backgroundColor: '#6366f1',
                                    borderColor: '#4f46e5',
                                    label: '',
                                    description: `√úbergangszone z* ‚âà ${modelParams.z_star}`
                                }
                            ]
                        }
                    }
                }
            });

            // S_Struktur Chart with enhanced tooltip
            const sStrukturCtx = document.getElementById('SstrukturChart').getContext('2d');
            if (sStrukturChartInstance) sStrukturChartInstance.destroy();
            
            // Ensure data exists and map correctly (dividing by S_CMB ~ 1e88)
            const sStrukturData = html_data.S_struktur.map(s => s / 1e88);
            
            sStrukturChartInstance = new Chart(sStrukturCtx, {
                type: 'line',
                data: {
                    labels: html_data.z_bins,
                    datasets: [{
                        label: 'S_{Struktur}(z) / S_{CMB}',
                        data: sStrukturData,
                        borderColor: '#ef4444', // Red-500
                        backgroundColor: createGradient(sStrukturCtx, '#ef4444', '#ef4444', 0.7, 0.1),
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true,
                        pointRadius: 0,
                        pointHoverRadius: 5
                    }]
                },
                options: {
                    ...getChartOptions('Struktur-Entropie S_{Struktur}(z)', 'S_{Struktur} / S_{CMB}', 
                        { scales: { y: { type: 'logarithmic' } } }),
                    plugins: {
                        ...getChartOptions().plugins,
                        tooltip: {
                            ...getChartOptions().plugins.tooltip,
                            callbacks: {
                                label: (context) => {
                                    const z = html_data.z_bins[context.dataIndex];
                                    const value = context.parsed.y;
                                    let explanation = '';
                                    
                                    // Add physical interpretation
                                    if (z < 0.5) {
                                        explanation = ' (Heutige Strukturbildung)';
                                    } else if (z < 1.5) {
                                        explanation = ' (Galaxienhaufen-Formation)';
                                    } else {
                                        explanation = ' (Fr√ºhe Strukturbildung)';
                                    }
                                    
                                    return `S_{Struktur}/S_{CMB} bei z=${z}: ${value.toExponential(2)}${explanation}`;
                                }
                            }
                        },
                        customAnnotation: {
                            annotations: [
                                {
                                    enabled: true,
                                    xValue: 0,
                                    yValue: sStrukturData[0],
                                    backgroundColor: '#ef4444',
                                    borderColor: '#b91c1c',
                                    label: '',
                                    description: 'Heutige Strukturentropie'
                                }
                            ]
                        }
                    }
                }
            });

            // Alpha Chart (Œ±(z) evolution)
            const alphaCtx = document.getElementById('AlphaChart').getContext('2d');
            if (alphaChartInstance) alphaChartInstance.destroy();
            
            alphaChartInstance = new Chart(alphaCtx, {
                type: 'line',
                data: {
                    labels: html_data.z,
                    datasets: [{
                        label: 'Œ±(z)',
                        data: html_data.alpha_z,
                        borderColor: '#8b5cf6', // Violet-500
                        backgroundColor: createGradient(alphaCtx, '#8b5cf6', '#8b5cf6', 0.6, 0.1),
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true,
                        pointRadius: 0,
                        pointHoverRadius: 5
                    }]
                },
                options: {
                    ...getChartOptions('Exponent Œ±(z)', 'Œ±(z)'),
                    plugins: {
                        ...getChartOptions().plugins,
                        tooltip: {
                            ...getChartOptions().plugins.tooltip,
                            callbacks: {
                                label: (context) => {
                                    const z = html_data.z[context.dataIndex];
                                    const value = context.parsed.y;
                                    let meaning = '';
                                    
                                    if (value > 0) {
                                        meaning = ' (Phantom-Bereich: w < -1)';
                                    } else if (value < 0) {
                                        meaning = ' (Quintessenz-Bereich: w > -1)';
                                    } else {
                                        meaning = ' (ŒõCDM-Fall: w = -1)';
                                    }
                                    
                                    return `Œ±(${z}) = ${value.toFixed(2)}${meaning}`;
                                }
                            }
                        },
                        customAnnotation: {
                            annotations: [
                                {
                                    enabled: true,
                                    xValue: modelParams.z_star,
                                    yValue: html_data.alpha_z[findKeyPoint(html_data.z, modelParams.z_star)] || 0,
                                    backgroundColor: '#8b5cf6',
                                    borderColor: '#7c3aed',
                                    label: '',
                                    description: `√úbergangszone z* = ${modelParams.z_star}`
                                }
                            ]
                        }
                    },
                    scales: {
                        ...getChartOptions().scales,
                        y: {
                            ...getChartOptions().scales.y,
                            grid: {
                                ...getChartOptions().scales.y.grid,
                                color: (context) => {
                                    if (context.tick.value === 0) {
                                        return 'rgba(107, 114, 128, 0.5)'; // Gray line at Œ± = 0
                                    }
                                    return getChartOptions().scales.y.grid.color;
                                },
                                lineWidth: (context) => {
                                    if (context.tick.value === 0) {
                                        return 2; // Thicker line at Œ± = 0
                                    }
                                    return 1;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // --- Tab switching logic ---
        document.addEventListener('DOMContentLoaded', function() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    
                    // Remove active class from all buttons and contents
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked button and corresponding content
                    button.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                    
                    // If switching to the graphs tab, render charts
                    if (tabId === 'glattung-graph') {
                        setTimeout(renderCharts, 100); // Small delay to ensure the tab is visible
                    }
                    
                    // Re-render MathJax when switching tabs
                    if (window.MathJax && window.MathJax.typeset) {
                        window.MathJax.typeset();
                    }
                });
            });
            
            // Initialize sliders
            const z_starSlider = document.getElementById('z_star');
            const z_starValue = document.getElementById('z_star_value');
            const alpha_0Slider = document.getElementById('alpha_0');
            const alpha_0Value = document.getElementById('alpha_0_value');
            const alpha_ampSlider = document.getElementById('alpha_amp');
            const alpha_ampValue = document.getElementById('alpha_amp_value');
            const resetButton = document.getElementById('resetParams');
            const downloadButton = document.getElementById('downloadData');
            
            if (z_starSlider) {
                z_starSlider.addEventListener('input', function(e) {
                    const value = parseFloat(e.target.value);
                    z_starValue.textContent = `z* = ${value.toFixed(2)}`;
                    modelParams.z_star = value;
                    recomputeData();
                    renderCharts();
                });
            }
            
            if (alpha_0Slider) {
                alpha_0Slider.addEventListener('input', function(e) {
                    const value = parseFloat(e.target.value);
                    alpha_0Value.textContent = `Œ±‚ÇÄ = ${value.toFixed(2)}`;
                    modelParams.alpha_0 = value;
                    recomputeData();
                    renderCharts();
                });
            }
            
            if (alpha_ampSlider) {
                alpha_ampSlider.addEventListener('input', function(e) {
                    const value = parseFloat(e.target.value);
                    alpha_ampValue.textContent = `A = ${value.toFixed(2)}`;
                    modelParams.alpha_amp = value;
                    recomputeData();
                    renderCharts();
                });
            }
            
            if (resetButton) {
                resetButton.addEventListener('click', function() {
                    // Reset to default values
                    modelParams = {
                        z_star: 0.7,
                        alpha_0: -0.6,
                        alpha_amp: 1.2
                    };
                    
                    // Update slider positions and values
                    if (z_starSlider) {
                        z_starSlider.value = modelParams.z_star;
                        z_starValue.textContent = `z* = ${modelParams.z_star.toFixed(2)}`;
                    }
                    
                    if (alpha_0Slider) {
                        alpha_0Slider.value = modelParams.alpha_0;
                        alpha_0Value.textContent = `Œ±‚ÇÄ = ${modelParams.alpha_0.toFixed(2)}`;
                    }
                    
                    if (alpha_ampSlider) {
                        alpha_ampSlider.value = modelParams.alpha_amp;
                        alpha_ampValue.textContent = `A = ${modelParams.alpha_amp.toFixed(2)}`;
                    }
                    
                    // Recompute data and redraw charts
                    recomputeData();
                    renderCharts();
                });
            }
            
            if (downloadButton) {
                downloadButton.addEventListener('click', function() {
                    // Create export data with current parameters
                    const exportData = {
                        modelName: "GDE-Modell",
                        parameters: {
                            ...modelParams,
                            H0: html_data.metadata.H0,
                            Omega_m: html_data.metadata.Omega_m,
                            Omega_Lambda: html_data.metadata.Omega_Lambda,
                            formula: `Œ±(z) = ${modelParams.alpha_0} + ${modelParams.alpha_amp} * tanh(2(z-${modelParams.z_star}))`
                        },
                        data: {
                            z: html_data.z,
                            H_z: html_data.H_z,
                            H_z_LCDM: html_data.H_z_LCDM,
                            w_z: html_data.w_z,
                            alpha_z: html_data.alpha_z,
                            Lambda_z: html_data.Lambda_z,
                            Lambda_glattung_z: html_data.Lambda_glattung_z,
                            Lambda_combined: html_data.Lambda_combined,
                            S_struktur: html_data.S_struktur.map(s => s / 1e88) // Normalized for easier use
                        },
                        metadata: {
                            generatedOn: new Date().toISOString(),
                            notes: "Daten aus dem GDE-Modell Explorer. S_struktur Werte sind normiert (S_struktur/S_CMB)."
                        }
                    };
                    
                    // Create JSON string
                    const jsonStr = JSON.stringify(exportData, null, 2);
                    
                    // Create blob and download
                    const blob = new Blob([jsonStr], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `gde-model-data-${new Date().toISOString().split('T')[0]}.json`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                });
            }
            
            // --- Dark mode toggle ---
            const darkModeToggle = document.getElementById('darkModeToggle');
            const darkModeIcon = document.getElementById('darkModeIcon');
            const darkModeText = document.getElementById('darkModeText');
            
            function toggleDarkMode() {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    darkModeIcon.textContent = 'üåô';
                    darkModeText.textContent = 'Dark Mode';
                } else {
                    document.documentElement.classList.add('dark');
                    darkModeIcon.textContent = '‚òÄÔ∏è';
                    darkModeText.textContent = 'Light Mode';
                }
                
                // Re-render charts if they exist
                if (document.getElementById('glattung-graph').classList.contains('active')) {
                    renderCharts();
                }
            }
            
            darkModeToggle.addEventListener('click', toggleDarkMode);
            
            // Set generation date
            document.getElementById('generationDate').textContent = new Date().toLocaleDateString('de-DE', {
                year: 'numeric', month: 'long', day: 'numeric'
            });
            
            // --- Loading indicator ---
            const loadingBar = document.getElementById('loading-bar');
            function updateLoadingBar(percent) {
                loadingBar.style.width = `${percent}%`;
                if (percent >= 100) {
                    setTimeout(() => {
                        loadingBar.style.width = '0%';
                    }, 300);
                }
            }
            
            // Simulate loading progress
            let progress = 0;
            const loadingInterval = setInterval(() => {
                progress += 5;
                updateLoadingBar(progress);
                if (progress >= 100) {
                    clearInterval(loadingInterval);
                }
            }, 50);
            
            // Initial render if we're on the glattung-graph tab
            if (document.getElementById('glattung-graph').classList.contains('active')) {
                renderCharts();
            }
        });
        
        // Ensure MathJax is properly initialized
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']]
            },
            startup: {
                ready: () => {
                    MathJax.startup.defaultReady();
                    // Initial render after MathJax is ready
                    if (document.getElementById('glattung-graph').classList.contains('active')) {
                        renderCharts();
                    }
                }
            }
        };
    </script>
</body>
</html>
